---
import safetyIcon1 from "../assets/img/racer-2.svg";
import safetyIcon2 from "../assets/img/car-pedals.svg";
import safetyIcon3 from "../assets/img/new-car.svg";
import safetyIcon4 from "../assets/img/barrier.svg";
import safetyCar from "../assets/img/safety_car.png";

import { Image } from 'astro:assets';
import Parallax from "./ui/Paralax";
---

<section class="safety-section relative">
  <h2 class="safety-section__title">Самое безопасное жогово</h2>
  <p class="safety-section__subtitle">В стоимость курса входит аренда нашего авто</p>
  <p class="safety-section__subtitle">Контраварийка проходит на Volkswagen Polo 1.6, уроки дрифта — на 370-сильной BMW M2.<br>
  Все авто — с АКПП!</p>
  <div class="safety-blocks">
    <div class="safety-block">
      <div class="safety-block__icon">
        <img src={safetyIcon1?.src} width="44" height="44" alt="icon" />
      </div>
      <span class="safety-block__text"
        >Тренер всегда с тобой в машине</span
      >
    </div>
    <div class="safety-block">
      <div class="safety-block__icon">
        <img src={safetyIcon2?.src} width="44" height="44" alt="icon" />
      </div>
      <span class="safety-block__text"
        >Второй комплект педалей, как в автошколе</span
      >
    </div>
    <div class="safety-block">
      <div class="safety-block__icon">
        <img src={safetyIcon4?.src} width="44" height="44" alt="icon" />
      </div>
      <span class="safety-block__text"
        >На специальном полигоне, без&nbsp;лишних людей и препятствий</span
      >
    </div>
    <div class="safety-block">
      <div class="safety-block__icon">
        <img src={safetyIcon3?.src} width="44" height="44" alt="icon" />
      </div>
      <span class="safety-block__text"
        >На своем авто вышло бы дороже</span
      >
    </div>
  </div>
  <Image src={safetyCar} alt="icon" class="safety-section__image" />
  <div class="container h-full mx-auto absolute left-0 top-0">
    <Parallax className="hidden sm:block absolute -right-[250px] top-0" speed={1} client:visible>
      <svg  height="300" viewBox="0 0 192 320" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g opacity="0.85" filter="url(#filter0_f_1647_405)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M29.9453 304.023L78.7355 267.45L73.7538 207.682L24.9636 244.254L29.9453 304.023ZM122.546 171.108L171.334 134.537L176.316 194.306L127.525 230.878L122.544 171.111L73.7559 207.682L68.7741 147.913L117.564 111.341L122.546 171.108ZM117.563 111.341L166.353 74.7686L161.371 14.9999L112.581 51.5722L117.563 111.341ZM68.7726 147.913L19.9824 184.485L15.0007 124.717L63.7909 88.1444L68.7726 147.913Z" fill="#FF0C49"/>
        </g>
        <defs>
          <filter id="filter0_f_1647_405" x="0" y="0" width="191.316" height="319.023" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feGaussianBlur stdDeviation="7.5" result="effect1_foregroundBlur_1647_405"/>
          </filter>
        </defs>
      </svg>
    </Parallax>
    <Parallax className="hidden sm:block absolute -right-[250px] top-0" speed={0.5} client:visible>
      <svg  height="500" viewBox="0 0 192 320" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g opacity="0.5" filter="url(#filter0_f_1647_405)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M29.9453 304.023L78.7355 267.45L73.7538 207.682L24.9636 244.254L29.9453 304.023ZM122.546 171.108L171.334 134.537L176.316 194.306L127.525 230.878L122.544 171.111L73.7559 207.682L68.7741 147.913L117.564 111.341L122.546 171.108ZM117.563 111.341L166.353 74.7686L161.371 14.9999L112.581 51.5722L117.563 111.341ZM68.7726 147.913L19.9824 184.485L15.0007 124.717L63.7909 88.1444L68.7726 147.913Z" fill="#FF0C49"/>
        </g>
        <defs>
          <filter id="filter0_f_1647_405" x="0" y="0" width="191.316" height="319.023" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
            <feGaussianBlur stdDeviation="7.5" result="effect1_foregroundBlur_1647_405"/>
          </filter>
        </defs>
      </svg>
    </Parallax>
  </div>
</section>

<style>
  .safety-section {
    padding: 90px 0;
    padding-top: 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 100%;
    overflow-x: hidden;
    background-repeat: no-repeat;
    background-position: left center;
    background-image: url("data:image/svg+xml,%3Csvg width='316' height='604' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m-51.631.497-293.205 603.269 660.518-3.268L-51.631.497Z' fill='%23DB3549'/%3E%3C/svg%3E");
  }
  .safety-section__title {
    font-style: italic;
    font-weight: 700;
    font-size: 70px;
    line-height: 77px;
    text-align: center;
    text-transform: uppercase;
    margin-bottom: 16px;
  }

  .safety-section__subtitle {
    margin-bottom: 16px;
    text-align: center;
  }

  .safety-section__subtitle  +   .safety-section__subtitle {
    margin-bottom: 42px;
  }

  .safety-blocks {
    display: grid;
    grid-template-columns: repeat(2, 377px);
    column-gap: 24px;
    row-gap: 30px;
    margin-bottom: 50px;
  }

  .safety-block {
    display: flex;
    align-items: center;
  }

  .safety-block__icon {
    margin-right: calc(32px + 20px);
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 72px;
    height: 72px;
    background-color: var(--color-accent);
    position: relative;
  }

  .safety-block__icon::after {
    content: "";
    position: absolute;
    right: -31px;
    top: 0;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 72px 32px 0 0;
    border-color: var(--color-accent) transparent transparent transparent;
  }

  .safety-block__text {
    font-weight: 400;
    font-size: 20px;
    line-height: 25px;
    color: #646464;
  }

  .safety-section__image {
    max-width: 100%;
    object-fit: contain;
  }

  @media (max-width: 1023px) {
    .safety-section__title {
      font-style: italic;
      font-weight: 700;
      font-size: 35px;
      line-height: 39px;
      text-align: center;
      text-transform: uppercase;
    }

    .safety-section__subtitle  {
        font-style: normal;
        font-weight: 400;
        font-size: 20px;
        line-height: 25px;
        text-align: center;
        color: #646464;
        margin-bottom: 50px;
    }

    .safety-section {
        padding: 90px 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
      background-position: left 79%;
      background-image: url("data:image/svg+xml,%3Csvg width='87' height='223' viewBox='0 0 87 223' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m86.487.659-250.323.906 109.652 220.779L86.487.659Z' fill='%23DB3549'/%3E%3C/svg%3E");       }

    .safety-blocks {
        grid-template-columns: 1fr;
    }
  }

  @media (max-width: 768px) {
    .safety-section {
      background-position: left 94%;
    }
  }
</style>
<script>
  //     import { gsap } from "gsap";
  // import { ScrollTrigger } from "gsap/ScrollTrigger";
  // gsap.registerPlugin(ScrollTrigger);
  //
  // const carImage: HTMLElement = document.querySelector(".safety-section__image");
  //
  // gsap
  //   .from(carImage, {
  //     x: window.innerWidth,
  //     ease: "ease-out",
  //     scrollTrigger: {
  //       trigger: carImage,
  //       start: 'top bottom',
  //       end: 'center center',
  //       scrub: 1.5,
  //     }
  //   });
</script>
